<html><head><title>CHANGELOG</title></head><body><!-- (jEdit options) :folding=explicit:collapseFolds=1: --><pre>
==============================================================================
===  TO DO  ==================================================================
==============================================================================
    should session lifetime be from start, or from last use?
    document PHP version needed (which is...? >=4.1:superglobals >=4.3:CLI)
        4.1.0 doesn't work on kinemage: cmd line can't load 'session mm'
        4.1.2 seems to work on glass
    implement safety valve for disk too full
    create logging functions
    add H and analyze should be able to run in same script (wait once)
    user should get partial results as big job is running
    Allow simple comparison of bad residues in two different models;
        see jobs/analyze.php for ideas
    Should analysis of worst residues ignore water or treat it separately?
    Add text at top of multicrit kinemage
    Allow user to retrieve PDB by id code
    Coloring on download table is sometimes off
    Put icons on analysis results page to identify the most-used kins
    File upload should provide pdbstat-style summary
    Implement file retrieval from PDB and NDB (if possible)
    Separate mc-mc and sc-x dots for multi-criterion kinemage
  + Add Ramalyze to the analysis script
 ** Track which analyses are done and customize report accordingly
    
==============================================================================
===  CHANGE LOG  =============================================================
==============================================================================

### 3pre11 ###
- updated PDB stat to find nonpolar H in nucleic acids, too.
- updated pdbstat to find nucleic acid residues
- changed preparePDB() to not add H; now done by reduceNoBuild()
- renamed prepared() upload PDB so as not to confuse user
- reworked analysis scripts so that only selected jobs are performed
- reworked analysis so that hydrogens are added "just in time" if needed
- put both mc-mc and sc-(anything) dots in AAC kinemage, but separately
- removed Ramachandran JPEG and EPS files in anticipation of providing PDFs
- removed Mage as a necessary binary

### 3pre10 ###
- really reworked page header/footer/styling. Style sheet hasn't been finished yet.
- removed all tab bar images and templates
- came up with a pretty decent "look" for the site; may change colors to match kinemage site
- rearranged upload page
- allowed user to revisit previously generated analysis
- each model now has its own download URL too
- implemented function to generate kinemage-viewing links
- added embedded KiNG page for kinemage viewing
- tried a pale brown background theme
- fixed accidentally introduced bug in analyze_display.php
- made nicer display of multi crit kinemage
- added Ramachandran plots to output of analysis (jpeg, kin, eps)
- added CB dev, all-atom contacts to analysis output

### 3pre9 ###
- added 'ignoreSegID' option to handle old Reduce'd files with 'new' in segID field
- loadRamachandran() and loadRotamer() now decompose residue names into parts
- loadCbetaDev() now synthesizes a residue name from the parts
- loadClashlist() now picks up worst clash per residue
- badRes now markes residues with clashes >= 0.40 A
- refactored badRes code into lib/analysis.php:findOutliers()
- started lib/visualize.php to make data visualizations
- wrote functions to find res with alt confs and guess at res center in 3-space
- started working on the new MultiCrit

### 3pre8 ###
- brought the whole project under Subversion version control
- created a shell script to restore filesystem state (symlinks and permissions)
- created analyze_display.php for Jeremy to start working in
- fixed loadCbetaDev() to deal with multiple headers from Prekin
- created a basic file-listing page
- administrator can now "enter" sessions from the monitoring page
- mocked up some HTML layouts for pages
- check script now tells about how big file uploads can be
- added "last touched" to admin page
- moved all string and formating functions to strings.php
- set svn:ignore properties on public_html/ and on symlinks in bin/
- check for presence of models before trying to list them.
  Alternately, we could just define $_SESSION['models'] = array() at startup.
  Actually, lets do that too.

### 3pre7 ###
- filled in the PDB upload form, though it doesn't do anything yet.
- implemented first cases of "More/Fewer options" links
- implemented background execution via launchBackground()
- implemented background job monitoring via job_progress.php
- file upload now works, basically, though no processing is performed.
- added config parameter MP_DEFAULT_TIMEZONE
- worked out a bug in launchBackground(): session data wasn't written immediately
- addmodel.php now does some nice pre-processing of all new models uploaded
- pdbstat now reports refinement program and temp, and a count of CNS headers
- refactored jobs/addmodel.php to facilitate future offline scripts
- created a function to write session data to disk immediately
- reworked the definition of a model entry.
  Now using -build will create a new model, so you can compare to the old.
- did proof-of-concept for Cbeta deviation analysis and clashlist

### 3pre6 ###
- filled in the Finish tab (rough draft) to allow users to log out
- described what should go in each tab

### 3pre5 ###
- fixed bug in GC function
- made PATH in config.php depend on MP_BASE_DIR
- added some things to check_config.php
- PATH setup is smarter: auto-detects OS and adds our bin/ directory
- added read-only marker for sessions to enable D&J's partial results
- it might make sense to make labbook keywords an array, but then
  transmitting them in a form becomes harder.
- started working on a standard page header
- Experimented with tables, images to make tabs. Images are a better bet.
- made first drafts of all the tab pages (empty). Linked them together.
- made labbook page work pretty well

### 3pre4 ###
- refined sessions yet again: now each top level page must know where
  the base installation directory is, relative to itself.
- session support has been reworked to use MP_BASE_DIR
- session create now defaults to false. This limits points of entry.
- added marker file for session lifetime
- added administrator overview of current sessions
- created garbage collection functions

### 3pre3 ###
- added (optional) mode to mkdir() call in sessions.php
- added time zone support to lab notebook
- continued refining session code

### 3pre2 ###
- wrote the which() part of check_config.php
- configured sessions to never use cookies
- implemented bare-bones of a lab notebook system
- rearranged how the include() system is set up

### 3pre1 ###
- built custom session-handling functions
- established simple test case for running background jobs
- started documentation

</pre></body></html>